<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="css/style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<link rel="apple-touch-icon" type="image/png" href="img/favicon/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="img/favicon/icon-192x192.png">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>uwuzuã‚µãƒ¼ãƒãƒ¼ãƒªã‚¹ãƒˆ</title>
</head>
<body>
<header class="header" id="header">
    <div class="view">
        <div class="logo">
            <img src="img/uwuzucolorlogo.svg">
            <p>ServerList</p>
        </div>
        <a href="https://www.uwuzu.com/">uwuzuå…¬å¼ã‚µã‚¤ãƒˆ</a>
    </div>
</header>
<main>
    <h1>ã‚µãƒ¼ãƒãƒ¼ãƒªã‚¹ãƒˆ</h1>
    <p>â€»ã“ã®ãƒšãƒ¼ã‚¸ã¯è©¦é¨“çš„ãªã‚‚ã®ã§ã™ã€‚<br>æ­£ã—ãå‹•ä½œã—ãªã„å ´åˆã¯<a href="https://www.uwuzu.com/docs/uwuzuserver/serverlist/">å¾“æ¥ã®ç‰©</a>ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚</p>
    <p>ã“ã®ãƒšãƒ¼ã‚¸ã§ã¯uwuzuã‚’å°å…¥æ¸ˆã¿ã®ã‚µãƒ¼ãƒãƒ¼ã‚’ãƒªã‚¹ãƒˆã¨ã—ã¦å…¬é–‹ã—ã¦ã„ã¾ã™ï¼<br>
        ã‚µãƒ¼ãƒãƒ¼ç®¡ç†è€…æ§˜ã‚ˆã‚Šæ²è¼‰ã‚’ã”å¸Œæœ›ã•ã‚Œã‚‹å ´åˆã¯ã ã„ã¡ã¾ã‚‹ã®Discordã‚„Twitter DMã€ãƒ¡ãƒ¼ãƒ«ã¾ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>
    <p>ã“ã®ãƒšãƒ¼ã‚¸ã«ã™ã¹ã¦ã®uwuzuã‚µãƒ¼ãƒãƒ¼ãŒæ²è¼‰ã•ã‚Œã¦ã„ã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚<br>
        ã‚µãƒ¼ãƒãƒ¼ã®APIã«æ¥ç¶šã§ããªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
    <div id="loading" class="loading" style="display: none;">
        ğŸ¤”
    </div>
    <div id="All" class="toukei" style="display: none;">
        <h3>uwuzuå…¨ä½“ã®çµ±è¨ˆæƒ…å ±</h3>
        <div class="flexbox">
            <div class="about">
                <div class="p2">ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</div>
                <p id="All_users"></p>
            </div>
            <div class="about">
                <div class="p2">ãƒ¦ãƒ¼ã‚ºæ•°</div>
                <p id="All_ueuse"></p>
            </div>
            <div class="about">
                <div class="p2">ã‚µãƒ¼ãƒãƒ¼æ•°</div>
                <p id="All_server"></p>
            </div>
        </div>
    </div>
</main>
<footer>
    <a href="https://daichimarukana.com">Â© 2022 - 2024 daichimarukana</a>
    <a href="https://www.uwuzu.com/" class="uwuzu">uwuzu</a>
</footer>
</body>
<script>
window.onload = function() {
    $("#loading").show();
    fetch('/serverlist.json')
        .then(response => response.text())
        .then(json => {
            const new_json = JSON.parse(json);
            console.log(new_json);
            serverlist = new_json.serverlist;

            var cnt = 0;
            var all_user = 0;
            var all_ueuse = 0;
            var all_server = 0;
            for (cnt in serverlist) {
                console.log(serverlist[cnt]);
                const server_domain = serverlist[cnt];
                $.ajaxSetup({ async: false });
                $.getJSON("https://"+server_domain+"/api/serverinfo-api", function(data){
                    
                    console.log(data.server_info.server_name)

                    if(data.server_info.invitation_code == true){
                        var invitation_code = '<div class="invitation_code">æ‹›å¾…ã‚³ãƒ¼ãƒ‰å¿…é ˆ</div>';
                    }else{
                        var invitation_code = '';
                    }
                    if(data.server_info.server_icon.length){
                        var server_icon_img = '<img src="'+data.server_info.server_icon+'">';
                    }else{
                        var server_icon_img = '<img src="/img/uwuzuicon.png">';
                    }
                    var html = 
                    '<div class="mes_textbox">'+
                        '<div class="icon_and_s_namebox">'+
                            '<div class="icon">'+server_icon_img+''+
                            '</div>'+
                            '<div class="s_namebox">'+
                                '<h2>'+data.server_info.server_name+'</h2>'+
                                '<h3><a href="https://'+server_domain+'">'+server_domain+'</a></h3>'+
                            '</div>'+invitation_code+''+
                        '</div>'+
                        '<h3>èª¬æ˜</h3>'+
                        '<p>'+data.server_info.server_description+'</p>'+
                        '<hr>'+
                        '<div class="btmzone">'+
                            '<div class="left">'+
                                '<div class="about">'+
                                    '<div class="p2">ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</div>'+
                                    '<p>'+data.server_info.usage.users+'</p>'+
                                '</div>'+
                                '<div class="about">'+
                                    '<div class="p2">ãƒ¦ãƒ¼ã‚ºæ•°</div>'+
                                    '<p>'+data.server_info.usage.ueuse+'</p>'+
                                '</div>'+
                            '</div>'+
                            '<div class="right">'+
                                '<div class="server">'+
                                    '<div class="p2">ã‚µãƒ¼ãƒãƒ¼æƒ…å ±</div>'+
                                    '<p>'+data.software.name+' '+data.software.version+'</p>'+
                                '</div>'+
                                '<div class="server">'+
                                    '<div class="p2">ç®¡ç†è€…</div>'+
                                    '<p>'+data.server_info.adminstor.name+'</p>'+
                                '</div>'+
                            '</div>'+
                        '</div>'+
                    '</div>';
                    $('main').append(html);
                    all_user = all_user + data.server_info.usage.users;
                    all_ueuse = all_ueuse + data.server_info.usage.ueuse;
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    var html = 
                    '<div class="mes_textbox">'+
                        '<div class="icon_and_s_namebox">'+
                            '<div class="icon">'+
                                '<img src="/img/error.png">'+
                            '</div>'+
                            '<div class="s_namebox">'+
                                '<h2>Error</h2>'+
                                '<h3><a href="https://'+server_domain+'">'+server_domain+'</a></h3>'+
                            '</div>'+
                        '</div>'+
                        '<h3>èª¬æ˜</h3>'+
                        '<p>ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ãŒã§ãã¾ã›ã‚“ã§ã—ãŸ<br><br>HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ : '+jqXHR.status+'</p>';
                    '</div>';
                    $('main').append(html);
                })
                all_server = serverlist.length;
            }
            $('#All_users').html(''+all_user+'');
            $('#All_ueuse').html(''+all_ueuse+'');
            $('#All_server').html(''+all_server+'');
            $("#loading").hide();
            $("#All").show();
        });
}
</script>
</html>